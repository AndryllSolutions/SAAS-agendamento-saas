# ============================================
# EVOLUTION API v2.3.3 LTS - ENVIRONMENT VARIABLES
# ============================================
# IMPORTANTE: Copie este arquivo para .env e ajuste os valores
# cp .env.example .env

# ============================================
# CORE
# ============================================
NODE_ENV=production
LOG_LEVEL=info

# ============================================
# DATABASE CONFIGURATION
# ============================================
DATABASE_ENABLED=true
DATABASE_PROVIDER=postgresql
DATABASE_CONNECTION_URI=postgresql://evolution:evolution@postgres:5432/evolution?schema=public

# ============================================
# POSTGRESQL CONFIGURATION
# ============================================
POSTGRES_DB=evolution
POSTGRES_USER=evolution
POSTGRES_PASSWORD=evolution

# PRODUÇÃO: Use senha forte!
# POSTGRES_PASSWORD=SuaSenhaForteAqui123!@#

# ============================================
# REDIS CACHE CONFIGURATION (OFFICIAL v2)
# ============================================
# Evolution API v2 usa CACHE_REDIS_* (documentação oficial)
CACHE_REDIS_ENABLED=true
CACHE_REDIS_URI=redis://redis:6379/6
CACHE_REDIS_PREFIX_KEY=evolution
CACHE_REDIS_SAVE_INSTANCES=true
CACHE_LOCAL_ENABLED=false

# ============================================
# SERVER CONFIGURATION
# ============================================

SERVER_TYPE=http
SERVER_PORT=8080
SERVER_URL=http://localhost:8080

# PRODUÇÃO: Ajuste para seu domínio
# SERVER_URL=https://api.seudominio.com

# ============================================
# AUTHENTICATION
# ============================================

# Tipo de autenticação (apikey ou jwt)
AUTHENTICATION_TYPE=apikey

# API Key para autenticação
# IMPORTANTE: Mude esta chave em produção!
AUTHENTICATION_API_KEY=B6D711FCDE4D4FD5936544120E713976

# Expor API key ao listar instâncias
AUTHENTICATION_EXPOSE_IN_FETCH_INSTANCES=true

# ============================================
# LANGUAGE & LOGGING
# ============================================

# Idioma (pt-BR, en, es)
LANGUAGE=pt-BR

# Níveis de log
LOG_LEVEL=ERROR,WARN,DEBUG,INFO,LOG,VERBOSE,DARK,WEBHOOKS
LOG_COLOR=true
LOG_BAILEYS=false

# ============================================
# SESSION CONFIGURATION
# ============================================

CONFIG_SESSION_PHONE_CLIENT=Evolution API
CONFIG_SESSION_PHONE_NAME=Chrome

# Versão do WhatsApp Web (CRÍTICO para QR Code funcionar)
# Se o QR Code não aparecer, atualize esta versão
CONFIG_SESSION_PHONE_VERSION=2.3000.1023204200

# ============================================
# QRCODE CONFIGURATION
# ============================================

# Tempo limite para QR Code (segundos)
QRCODE_LIMIT=30

# Cor do QR Code (hex)
QRCODE_COLOR=#198754

# ============================================
# INSTANCE MANAGEMENT
# ============================================

# Deletar instância ao desconectar (true/false)
DEL_INSTANCE=false

# Tempo de expiração de instância (minutos)
INSTANCE_EXPIRATION_TIME=false
INSTANCE_EXPIRATION_TIME_IN_MINUTES=10080

# ============================================
# WEBHOOK CONFIGURATION
# ============================================

# Webhook global (opcional)
WEBHOOK_GLOBAL_ENABLED=false
WEBHOOK_GLOBAL_URL=
WEBHOOK_GLOBAL_WEBHOOK_BY_EVENTS=false

# Eventos para webhook (separados por vírgula)
# WEBHOOK_EVENTS=messages.upsert,messages.update,connection.update

# ============================================
# RABBITMQ (OPCIONAL - Desabilitado por padrão)
# ============================================

RABBITMQ_ENABLED=false
# RABBITMQ_URI=amqp://guest:guest@rabbitmq:5672

# ============================================
# WEBSOCKET (OPCIONAL - Desabilitado por padrão)
# ============================================

WEBSOCKET_ENABLED=false
WEBSOCKET_GLOBAL_EVENTS=false

# ============================================
# TYPEBOT, CHATWOOT, OPENAI (OPCIONAL)
# ============================================

TYPEBOT_ENABLED=false
CHATWOOT_ENABLED=false
OPENAI_ENABLED=false
DIFY_ENABLED=false

# ============================================
# CORS (OPCIONAL)
# ============================================

# CORS_ORIGIN=*
# CORS_METHODS=POST,GET,PUT,DELETE
# CORS_CREDENTIALS=true

# ============================================
# NOTAS IMPORTANTES
# ============================================
#
# 1. DATABASE_PROVIDER deve ser EXATAMENTE "postgresql" ou "mysql"
#    - NÃO use: postgres, pgsql, pg, PostgreSQL
#    - USE: postgresql (tudo minúsculo)
#
# 2. DATABASE_CONNECTION_URI deve incluir "?schema=public"
#    - Formato correto: postgresql://user:pass@host:5432/db?schema=public
#
# 3. DATABASE_ENABLED deve ser "true" (string, não boolean)
#
# 4. Mantenha este arquivo (.env) no MESMO diretório do docker-compose.yml
#
# 5. Em produção, SEMPRE mude:
#    - POSTGRES_PASSWORD
#    - AUTHENTICATION_API_KEY
#    - SERVER_URL
#
# ============================================
